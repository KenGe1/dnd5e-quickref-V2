<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>D&D 5e Kurzreferenz</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="css/quickref.css">
    <link rel="stylesheet" type="text/css" href="css/icons.css">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lora:700" rel="stylesheet" type="text/css">

    <!-- Javascript -->
    <script>
        // Force a hard refresh if the cached version of the app is outdated.
        // This logic is inlined in the HTML to ensure it runs even if the main JS file is cached.
        (function() {
            const CURRENT_APP_VERSION = '2.1.4';
            window.dndQuickRefAppVersion = CURRENT_APP_VERSION;
            const VERSION_KEY = 'appVersion';
            const storedVersion = localStorage.getItem(VERSION_KEY);

            if (storedVersion !== CURRENT_APP_VERSION) {
                localStorage.setItem(VERSION_KEY, CURRENT_APP_VERSION);
                location.reload(true);
            }
        })();
    </script>
</head>

<body class="page-background app-loading">
    <div class="dark-mode">
        <div class="page fontsize" data-size="fullscreen">

            <!-- Movement section -->
            <div id="section-movement" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Bewegung
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Alle Einträge einklappen</button>
                        </div>
                        <span class="float-right">begrenzt durch Bewegungsrate</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Du kannst dich jederzeit während deiner Runde bewegen (vor, nach oder während Aktionen).
                    </div>
                    <div class="section-row" id="basic-movement">
                    </div>
                </div>
            </div>

            <!-- Action section -->
            <div id="section-action" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Aktion
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Alle Einträge einklappen</button>
                        </div>
                        <span class="float-right">1/Runde</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Du kannst außerdem kostenlos mit einem Objekt oder Merkmal der Umgebung interagieren.
                    </div>
                    <div class="section-row" id="basic-actions"></div>
                </div>
            </div>

            <!-- Bonus action section -->
            <div id="section-bonus-action" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Bonusaktion
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Alle Einträge einklappen</button>
                        </div>
                        <span class="float-right">max. 1/Runde</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Du kannst eine Bonusaktion nur ausführen, wenn eine besondere Fähigkeit, ein Zauber oder ein Merkmal angibt, dass du etwas als Bonusaktion tun kannst.
                    </div>
                    <div class="section-row" id="basic-bonus-actions"></div>
                </div>
            </div>

            <!-- Reaction section -->
            <div id="section-reaction" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Reaktion
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Alle Einträge einklappen</button>
                        </div>
                        <span class="float-right">max. 1/Runde</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Eine Reaktion ist eine unmittelbare Antwort auf einen Auslöser und kann in deiner Runde oder der eines anderen stattfinden.
                    </div>
                    <div class="section-row" id="basic-reactions"></div>
                </div>
            </div>

            <!-- Condition section -->
            <div id="section-condition" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Zustand
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Alle Einträge einklappen</button>
                        </div>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Zustände verändern deine Fähigkeiten auf unterschiedliche Weise und können durch Zauber, Klassenmerkmale, Angriffe von Monstern oder andere Effekte entstehen.
                    </div>
                    <div class="section-row" id="basic-conditions"></div>
                </div>
            </div>

            <!-- Environmental section -->
            <div id="section-environment" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Umwelteinflüsse
                            <span class="chevron"></span>
                            <button class="collapse-all-btn">Alle Einträge einklappen</button>
                        </div>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Effekte, die die Sicht verdecken, können die meisten Abenteueraufgaben erheblich behindern.
                    </div>
                    <div class="section-row" id="environment-obscurance"></div>
                    <div class="section-row section-subtitle text fontsize">
                        Das Vorhandensein oder Fehlen von Licht in einer Umgebung erzeugt drei Kategorien der Beleuchtung.
                    </div>
                    <div class="section-row" id="environment-light"></div>
                    <div class="section-row section-subtitle text fontsize">
                        Manche Kreaturen besitzen außergewöhnliche Sinne, die ihnen die Wahrnehmung ihrer Umgebung ermöglichen.
                    </div>
                    <div class="section-row" id="environment-vision"></div>
                    <div class="section-row section-subtitle text fontsize">
                        Hindernisse können im Kampf Deckung bieten und ein Ziel schwerer verletzbar machen.
                    </div>
                    <div class="section-row" id="environment-cover"></div>
                </div>
            </div>
            <!-- Settings section -->
            <div id="section-settings" class="section-container">
                <div class="section-title">
                    <div class="section-title-content">
                        <div class="section-title-text">
                            Einstellungen
                            <span class="chevron collapsed"></span>
                            <button class="collapse-all-btn" id="app-version-display" disabled>v0.0.0</button>
                        </div>
                        <span class="float-right" id="active-ruleset-label"></span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="section-row section-subtitle text fontsize">
                        Du kannst die folgenden Schalter nutzen, um die Einstellungen dieser Seite anzupassen.
                    </div>
                    <div class="section-row" id="settings-items-container">
                        <div class="item itemsize settings-item" title="Optionale Regeln einbeziehen">
                            <div class="item-text-container text" id="optional-toggle-item">
                                <div class="item-title">Optionale Regeln einbeziehen (*)</div>
                                <div class="item-desc">Optionale offizielle Regeln anzeigen/ausblenden.</div>
                            </div>
                            <div class="item-toggle"><label class="switch">
                                    <input type="checkbox" id="optional-switch">
                                    <span class="slider round"></span>
                                </label></div>
                        </div>
                        <div class="item itemsize settings-item" title="Hausregeln einbeziehen">
                            <div class="item-text-container text" id="homebrew-toggle-item">
                                <div class="item-title">Hausregeln einbeziehen (**)</div>
                                <div class="item-desc">Die gängigsten Hausregeln anzeigen/ausblenden.</div>
                            </div>
                            <div class="item-toggle"><label class="switch">
                                    <input type="checkbox" id="homebrew-switch">
                                    <span class="slider round"></span>
                                </label></div>
                        </div>
                        <div class="item itemsize settings-item" title="Dunkelmodus" hidden>
                            <div class="item-text-container text" id="darkmode-toggle-item">
                                <div class="item-title">Dunkelmodus</div>
                                <div class="item-desc">Dunkelmodus aktivieren/deaktivieren</div>
                            </div>
                            <div class="item-toggle"><label class="switch">
                                    <input type="checkbox" id="darkmode-switch">
                                    <span class="slider round"></span>
                                </label></div>
                        </div>
                        <div class="item itemsize settings-item" title="2024-Regeln einbeziehen">
                            <div class="item-text-container text" id="2024rules-toggle-item">
                                <div class="item-title">Auf 2024-Regeln umschalten</div>
                                <div class="item-desc">D&amp;D-2024-Regeln aktivieren.</div>
                            </div>
                            <div class="item-toggle"><label class="switch">
                                    <input type="checkbox" id="rules2024-switch">
                                    <span class="slider round"></span>
                                </label></div>
                        </div>
                        <a href="https://github.com/KenGe1/dnd5e-kurzreferenz-deutsch/issues" target="_blank" rel="noopener noreferrer" class="item itemsize settings-item" title="Feedback geben" id="feedback-link-item">
                            <div class="item-text-container text">
                                <div class="item-title">Feedback geben</div>
                                <div class="item-desc">Problem gefunden oder eine Idee? Sag mir Bescheid!</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Cookie notice: informs users about cookie usage and provides an accept button -->
    <div id="cookie-notice" class="cookie-notice">
        <p>Diese Website verwendet Cookies, damit du die bestmögliche Erfahrung auf unserer Website hast.</p>
        <button id="accept-cookies">Akzeptieren</button>
    </div>
    <!-- Main quickref JavaScript logic: handles dynamic content, toggles, and filtering -->
    <script type="text/javascript" src="js/quickref.js" charset="utf-8"></script>
    <script>
        // Cookie notice logic: shows the notice if not accepted, hides it on accept
        document.addEventListener('DOMContentLoaded', function () {
            var cookieNotice = document.getElementById('cookie-notice');
            var acceptButton = document.getElementById('accept-cookies');

            if (!localStorage.getItem('cookiesAccepted')) {
                cookieNotice.style.display = 'block';
            }

            acceptButton.addEventListener('click', function () {
                localStorage.setItem('cookiesAccepted', 'true');
                cookieNotice.style.display = 'none';
            });
        });
    </script>

</body>

</html>
